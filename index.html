<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="">
	<style type="text/css" >
		*{
			margin: 0;
			padding: 0;
		}
		#yudi{
			position: absolute;
			width: 100%;
			height: 100%;
		}
	</style>
</head>
<body>
	<canvas id="yudi"></canvas>

	<script>
		window.onload(function(){
			// canvas元素初始化
			var canvasE1=document.getElementById('yudi');
			var ctx=canvasE1.getContext('2d');
			var backgroundColor = '#000';
			canvasEl.width = canvasEl.clientWidth;
			canvasEl.height = canvasEl.clientHeight;
			
			var linelist = []; // 保存雨滴的数组 一条线 
			var dropList = []; // 保存小水珠的数组 圆弧		
			var gravity = 0.5; // 重力  雨滴下落后散成小水珠，小水珠会先上升后下降
			var mousePos = [0, 0];  // 保存鼠标的坐标 
			var mouseDis = 35;  // 鼠标以mouseDis为半径范围内的雨滴会散开，形成小水珠
			var lineNum = 3; // 一次动画，画lineNum 条雨滴，lineNum 值越大，下雨就越密集
			var speedx = 0;  // 跟随鼠标方向 变化下雨方向的 速度
			var maxspeedx = 0;  // speedx 可以取的最大值,相等时下雨方向随鼠标移动方向立即改变

			// 页面大小发生变化时，重置canvas画布大小
			window.onresize = function () {
		        canvasEl.width = canvasEl.clientWidth;
		        canvasEl.height = canvasEl.clientHeight;
		    }
		    //移动鼠标触发事件
		    window.onmousemove = function (e) {
		    	mousePos[0] = e.clientX;
        		mousePos[1] = e.clientY;
        		maxspeedx = (e.clientX - canvasEl.clientWidth / 2) / (canvasEl.clientWidth / 2);
        		/*通过鼠标位置，设置 maxspeedx的值，取值范围是 -1 到 1
			         maxspeedx的值，关系到 
			         1、雨滴的方向
			         2、雨滴下落的方向
			         3、雨滴下落方向 跟随 鼠标移动方向变化的速度
			         4、小水珠的移动方向，值越接近1，表示方向越向右，值越接近-1，表示方向越向左
		        */ 

		    }

		    // 根据参数，返回一个rgb颜色，用于给雨滴设置颜色
	      	function getRgb(r, g, b) {
	      	  return "rgb(" + r + "," + g + "," + b + ")";
	      	}
	      	// 画 一滴雨（一条线）
      		function createLine(e) {
      			var temp = 0.25 * (50 + Math.random() * 100);  // 随机生成 雨滴的长度
      			var line = {
      			 	speed: 5.5 * (Math.random() * 6 + 3), // 雨滴下落速度  
      			 	die: false,  // 判断是否删除
      			 	posx: e, // 雨滴x坐标 
      			 	posy: -50, // 雨滴y坐标
      			 	h: temp, // 雨滴的长度
      			 	color: getRgb(Math.floor(temp * 255 / 75), Math.floor(temp * 255 / 75), Math.floor(temp * 255 / 75))
      			};
      			linelist.push(line);
      		}
		})
	</script>
</body>
</html>